templates/admin/view_results.html
{% extends 'base.html' %}
{% block title %}View Results{% endblock %}
{% block content %}
  <h2>All Results</h2>
  <form method="get" action="{{ url_for('view_results') }}">
    <label>Filter by roll</label>
    <input type="text" name="roll" value="{{ request.args.get('roll','') }}">
    <button type="submit">Filter</button>
  </form>
  <table>
    <thead><tr><th>Roll</th><th>Name</th><th>Subject</th><th>Marks</th><th>Max</th><th>%</th><th>Action</th></tr></thead>
    <tbody>
      {% for r in results %}
      <tr>
        <td>{{ r.student.roll }}</td>
        <td>{{ r.student.name }}</td>
        <td>{{ r.subject }}</td>
        <td>{{ r.marks }}</td>
        <td>{{ r.max_marks }}</td>
        <td>{{ '%.2f' % r.percentage() }}</td>
        <td>
          <form action="{{ url_for('delete_result', result_id=r.id) }}" method="post" style="display:inline;">
            <button type="submit" onclick="return confirm('Delete this result?')">Delete</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr><td colspan="7">No results yet</td></tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
